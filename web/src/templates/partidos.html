<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/partidos.css') }}">
    
    {% block link_especifico_pagina %}{% endblock link_especifico_pagina %}

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>

    <title>Partidos</title>
</head>
<body class="body-equipo-{{ equipo }}">


    <nav class="navbar-principal">
        <div class="navbar-principal-izq">

            <img class="navbar-escudo" src="{{ url_for('static', filename='imagenes/favoritos/'+equipo+'.png') }}" alt="Imagen" onclick="window.location.href='/partidos'" style="cursor: pointer;">

            <ul class="navbar-principal-menu">

                <div class="desplegable-contenedor-navbar-club">

                    <button class="button-navbar-club" onclick="desplegableNavBarClub()">
                        <strong>Club</strong>
                        <img src="{{ url_for('static', filename='imagenes/iconos/flecha.png') }}" alt="Flecha Icon" class="icono-flecha-navbar"> 
                    </button>

                    <div id="menuDesplegableNavBarClub" class="menu-desplegable-navbar-club">
                        <a href="/equipo/{{ equipo }}" class="opcion-desplegable-navbar-club">
                            <strong>Datos Del Club</strong>
                        </a>
                        <a href="/estadio/{{ estadio_equipo }}" class="opcion-desplegable-navbar-club">
                            <strong>Estadio</strong>
                        </a>
                        <a href="#" class="opcion-desplegable-navbar-club">
                            <strong>Plantilla</strong>
                        </a>
                    </div>

                </div>

                <div class="desplegable-contenedor-navbar-mis-partidos" onclick="window.location.href='/partidos/asistidos'">
                    <button class="button-navbar-mis-partidos">
                        <strong>Mis Partidos</strong>
                    </button>
                </div>

                <div class="desplegable-contenedor-navbar-equipos" onclick="window.location.href='/equipos'">
                    <button class="button-navbar-equipos">
                        <strong>Equipos</strong>
                    </button>
                </div>

                <div class="desplegable-contenedor-navbar-estadios">

                    <button class="button-navbar-estadios" onclick="desplegableNavBarEstadios()">
                        <strong>Estadios</strong>
                        <img src="{{ url_for('static', filename='imagenes/iconos/flecha.png') }}" alt="Flecha Icon" class="icono-flecha-navbar"> 
                    </button>

                    <div id="menuDesplegableNavBarEstadios" class="menu-desplegable-navbar-estadios">
                        <a href="/estadios" class="opcion-desplegable-navbar-estadios">
                            <strong>Todos Los Estadios</strong>
                        </a>
                        <a href="/estadios/mis_estadios" class="opcion-desplegable-navbar-estadios">
                            <strong>Mis Estadios</strong>
                        </a>
                    </div>

                </div>

                <div class="desplegable-contenedor-navbar-competiciones">

                    <button class="button-navbar-competiciones" onclick="desplegableNavBarCompeticiones()">
                        <strong>Competiciones</strong>
                        <img src="{{ url_for('static', filename='imagenes/iconos/flecha.png') }}" alt="Flecha Icon" class="icono-flecha-navbar"> 
                    </button>

                    <div id="menuDesplegableNavBarCompeticiones" class="menu-desplegable-navbar-competiciones">
                        <a href="/competiciones" class="opcion-desplegable-navbar-competiciones">
                            <strong>Todas Las Competiciones</strong>
                        </a>
                        <a href="#" class="opcion-desplegable-navbar-competiciones">
                            <strong>Mis Competiciones</strong>
                        </a>
                    </div>

                </div>



            </ul>

        </div>

        <div class="desplegable-contenedor-navbar-usuario">

            <button class="button-navbar-usuario" onclick="desplegableNavBarUsuario()">
                <img src="{{ url_for('static', filename='imagenes/iconos/usuario.png') }}" alt="Usuario Icon" class="icono-usuario">
            </button>

            <div id="menuDesplegableNavBarUsuario" class="menu-desplegable-navbar-usuario">
                <a href="#" class="opcion-desplegable-navbar-usuario">
                    <strong>{{ usuario }}</strong>
                </a>
                <a href="/anadir_partido_asistido" class="opcion-desplegable-navbar-usuario">
                    <strong>Añadir Partido</strong>
                </a>
                <a href="/logout" class="opcion-desplegable-navbar-usuario">
                    <strong>Cerrar Sesión</strong>
                </a>
            </div>

        </div>

    </nav>

    <div class="contenedor-pagina">

        {% block contenedor_lateral_izq %}

        <div class="contenedor-lateral contenedor-lateral-izq">
            <div class="circulo-partidos-totales">
                <p class="titulo-circulo-partidos-totales">Partidos Jugados</p>
                <p class="valor-circulo-partidos-totales"><strong>{{ numero_partidos }}</strong></p>
            </div>
            <div class="circulo-estadisticas-partidos-disputados">
                <canvas id="grafico_tarta"></canvas>
                <script>var datos_grafica_tarta={{ resultados_partidos_disputados | tojson | safe }};</script>
                <script src="{{ url_for('static', filename='js/grafico_tarta.js') }}"></script>
            </div>
            <div class="circulo-partidos-asistidos">
                <p class="titulo-circulo-partidos-asistidos">Partidos Asistidos</p>
                <p class="valor-circulo-partidos-asistidos"><strong>{{ numero_partidos_asistidos }}</strong></p>
            </div>
        </div>

        {% endblock contenedor_lateral_izq %}

        <div class="contenido-central">

            <div class="contenido-principal">

                {% block partidos %}

                <div class="contenedor-titulo">
                    <h1>

                        {% if temporada_filtrada is none %}
                            Partidos del {{ nombre_equipo }}
                        {% else %}
                            Partidos del {{ nombre_equipo }} {{ temporada_filtrada-1 }}/{{ temporada_filtrada }}
                        {% endif %}

                        {% if local==1 %}
                            <img src="{{ url_for('static', filename='imagenes/iconos/local.png') }}" alt="Local Filtrado" height="30">
                        {% elif local==2 %}
                            <img src="{{ url_for('static', filename='imagenes/iconos/visitante.png') }}" alt="Visitante Filtrado" height="30">
                        {% else %}
                            <img src="{{ url_for('static', filename='imagenes/iconos/calendario.png') }}" alt="Total Filtrado" height="30">
                        {% endif %}

                    </h1>
                </div>

                {% endblock partidos %}

                {% block principal %}

                <div class="contenedor-tarjetas-partidos">

                    <div class="tarjetas-partidos">
                        <div class="tarjetas-partidos-wrapper">

                        {% for partido in partidos %}

                            <div class="tarjeta-partido" onclick="window.location.href='/partido/{{ partido[0] }}'">
                                <p><strong>{{ partido[2] }} - {{ partido[9] }}</strong></p>
                                <div class="info-partido">

                                    {% if partido[5]==-1 %}
                                        <img src="{{ url_for('static', filename='imagenes/iconos/no_escudo.png') }}" alt="Local Icon">
                                    {% else %}
                                        <img src="{{ url_imagen_escudo }}{{ partido[5] }}.png" alt="Local Icon">
                                    {% endif %}

                                    <h4>{{ partido[4] }} {{ partido[1] }} {{ partido[7] }}</h4>

                                    {% if partido[8]==-1 %}
                                        <img src="{{ url_for('static', filename='imagenes/iconos/no_escudo.png') }}" alt="Visitante Icon">
                                    {% else %}
                                        <img src="{{ url_imagen_escudo }}{{ partido[8] }}.png" alt="Visitante Icon">
                                    {% endif %}

                                </div>
                            </div>

                        {% endfor %}

                         </div>
                    </div>

                </div>

                <div class="contenedor-tipo-partidos">
                    <a href="/partidos" class="tipo-partidos tipo-partidos-todo">
                        <img src="{{ url_for('static', filename='imagenes/iconos/calendario.png') }}" alt="Todo" height="40">
                    </a>
                    <a href="/partidos?local=1" class="tipo-partidos tipo-partidos-local">
                        <img src="{{ url_for('static', filename='imagenes/iconos/local.png') }}" alt="Local" height="40">
                    </a>
                    <a href="/partidos?local=2" class="tipo-partidos tipo-partidos-visitante">
                        <img src="{{ url_for('static', filename='imagenes/iconos/visitante.png') }}" alt="Visitante" height="40">
                    </a>
                    <div class="contenedor-desplegable">
                        <select id="temporada" name="temporada">
                            <option value="" selected disabled hidden>
                                Temporada {{ temporada_filtrada-1 }} - {{ temporada_filtrada }}
                            </option>
                            {% for temporada in temporadas %}
                                <option value="{{ temporada }}">{{ temporada-1 }} - {{ temporada }}</option>
                            {% endfor %}

                        </select>
                    </div>
                </div>


                {% endblock principal %}

            </div>

        </div>

        {% block contenedor_lateral_der %}
        
        <div class="contenedor-lateral contenedor-lateral-der">

            {% if partidos_asistidos %}
                <div class="tarjeta-partidos-asistidos">

                <p class="titulo-partidos-asistidos">
                    <strong>
                    {% if temporada_filtrada is none %}
                        Asistidos
                    {% else %}
                        Asistidos {{ temporada_filtrada-1 }}/{{ temporada_filtrada }}
                    {% endif %}
                    </strong>

                    {% if local==1 %}
                        <img src="{{ url_for('static', filename='imagenes/iconos/local.png') }}" alt="Local Asistido Filtrado" height="20">
                    {% elif local==2 %}
                        <img src="{{ url_for('static', filename='imagenes/iconos/visitante.png') }}" alt="Visitante Asistido Filtrado" height="20">
                    {% else %}
                        <img src="{{ url_for('static', filename='imagenes/iconos/calendario.png') }}" alt="Total Asistido Filtrado" height="20">
                    {% endif %}

                </p>

                    <div class="tarjetas-partidos-asistidos">
                        <div class="tarjetas-partidos-asistidos-wrapper">

                        {% for asistido in partidos_asistidos %}

                            <div class="tarjeta-partido-asistido" onclick="window.location.href='/partido/{{ asistido[0] }}'">

                                <p><strong>{{ asistido[3] }}</strong></p>

                                <div class="info-partido-asistido">

                                    {% if asistido[4]==-1 %}
                                        <img src="{{ url_for('static', filename='imagenes/iconos/no_escudo.png') }}" alt="Local Icon">
                                    {% else %}
                                        <img src="{{ url_imagen_escudo }}{{ asistido[4] }}.png" alt="Local Icon">
                                    {% endif %}

                                    <h4>{{ asistido[1] }}</h4>

                                    {% if asistido[5]==-1 %}
                                        <img src="{{ url_for('static', filename='imagenes/iconos/no_escudo.png') }}" alt="Visitante Icon">
                                    {% else %}
                                        <img src="{{ url_imagen_escudo }}{{ asistido[5] }}.png" alt="Visitante Icon">
                                    {% endif %}

                                </div>

                                 <p><strong>{{ asistido[2] }}</strong></p>

                            </div>

                        {% endfor %}

                         </div>
                    </div>
                </div>
            {% endif %}

        </div>

        {% endblock contenedor_lateral_der %}
        
    </div>

    <script src="{{ url_for('static', filename='js/temporadas.js') }}"></script>
    <script src="{{ url_for('static', filename='js/pagina_anterior.js') }}"></script>
    <script src="{{ url_for('static', filename='js/desplegables_navbar.js') }}"></script>

    <footer>
         <p>&copy; 2024 Futbol App. Todos los derechos reservados.</p>
    </footer>

</body>
</html>